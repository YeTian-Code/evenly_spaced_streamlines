
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Evenly Spaced Streamlines</title><meta name="generator" content="MATLAB 9.0"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-10-02"><meta name="DC.source" content="even_stream_demo.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Evenly Spaced Streamlines</h1><!--introduction--><p>This package plots evenly spaced streamlines for a 2D vector field using the algorithm described in Jobar &amp; Lefer, 1997 [1]. Four types of plots are included (as in [1]): line, arrow, taper, texture. Streamline computation and plotting are split, so that the data can be replotted without unnecessarily repeating the computations. In the remainder of this document, each type of plot is genereated for an example vector field.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Example vector field</a></li><li><a href="#2">Plot stream lines</a></li><li><a href="#3">Plot stream lines with arrow glyphs</a></li><li><a href="#4">Plot tapered stream lines</a></li><li><a href="#5">Plot textured stream lines</a></li><li><a href="#6">References</a></li></ul></div><h2>Example vector field<a name="1"></a></h2><p>The vector field for is the gradient of a simple surface with a single local minimum and maximum.</p><pre class="codeinput"><span class="comment">% create vector field</span>
vv = linspace(-2, 2, 20);
hh = vv(2)-vv(1);
[xx, yy] = meshgrid(vv);
zz = xx .* exp(-xx.^2 - yy.^2);
[dzdx, dzdy] = gradient(zz, hh, hh);

<span class="comment">% plot surface and vector field</span>
hf = figure;
hf.Name = sprintf(<span class="string">'%s: example vector field'</span>, mfilename);
imagesc([vv(1), vv(end)], [vv(1), vv(end)], zz);
hold <span class="string">on</span>
quiver(xx, yy, dzdx, dzdy, <span class="string">'Color'</span>, <span class="string">'k'</span>);
title(<span class="string">'Example Vector Field'</span>);
ax = gca;
ax.XTick = [];
ax.YTick = [];
</pre><img vspace="5" hspace="5" src="even_stream_demo_01.png" style="width:560px;height:420px;" alt=""> <h2>Plot stream lines<a name="2"></a></h2><p>Compute streamlines and plot using a simple line style.</p><pre class="codeinput"><span class="comment">% parameters</span>

<span class="comment">% compute</span>
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf(<span class="string">'even_stream_data: %.3f s elapsed\n'</span>, toc);

<span class="comment">% plot</span>
tic
hf = figure;
hf.Name = sprintf(<span class="string">'%s: even stream line'</span>, mfilename);
even_stream_line(xy, <span class="string">'LineWidth'</span>, 0.5, <span class="string">'Color'</span>, <span class="string">'k'</span>, <span class="string">'LineStyle'</span>, <span class="string">'-'</span>);
title(<span class="string">'even\_stream\_line'</span>);
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf(<span class="string">'even_stream_line: %.3f s elapsed\n'</span>, toc);
</pre><pre class="codeoutput">even_stream_data: 0.674 s elapsed
even_stream_line: 0.052 s elapsed
</pre><img vspace="5" hspace="5" src="even_stream_demo_02.png" style="width:560px;height:420px;" alt=""> <h2>Plot stream lines with arrow glyphs<a name="3"></a></h2><p>Compute streamlines and plot lines with arrow glyphs to indicate flow direction.</p><pre class="codeinput"><span class="comment">% compute</span>
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf(<span class="string">'even_stream_data: %.3f s elapsed\n'</span>, toc);

<span class="comment">% plot</span>
tic
hf = figure;
hf.Name = sprintf(<span class="string">'%s: even stream arrow'</span>, mfilename);
even_stream_arrow(xy, <span class="string">'LineStyle'</span>, <span class="string">'-'</span>, <span class="string">'LineWidth'</span>, 0.5, <span class="string">'Color'</span>, <span class="string">'k'</span>, <span class="keyword">...</span>
    <span class="string">'ArrowLength'</span>, 5, <span class="string">'ArrowTipAngle'</span>, 30, <span class="string">'ArrowBaseAngle'</span>, 10, <span class="keyword">...</span>
    <span class="string">'ArrowSpace'</span>, 10);
title(<span class="string">'even\_stream\_arrow'</span>);
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf(<span class="string">'even_stream_arrow: %.3f s elapsed\n'</span>, toc);
</pre><pre class="codeoutput">even_stream_data: 0.714 s elapsed
even_stream_arrow: 0.435 s elapsed
</pre><img vspace="5" hspace="5" src="even_stream_demo_03.png" style="width:560px;height:420px;" alt=""> <h2>Plot tapered stream lines<a name="4"></a></h2><p>Plot stream lines with tapering effect, such that line width scales with the distance to the nearest neighboring streamline.</p><pre class="codeinput"><span class="comment">% compute</span>
tic
[xy, dist] = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf(<span class="string">'even_stream_data: %.3f s elapsed\n'</span>, toc);

<span class="comment">% plot</span>
tic
hf = figure;
hf.Name = sprintf(<span class="string">'%s: even stream taper'</span>, mfilename);
even_stream_taper(xy, dist, <span class="string">'LineWidthMin'</span>, 0.5, <span class="string">'LineWidthMax'</span>, 2, <span class="string">'Color'</span>, <span class="string">'k'</span>);
title(<span class="string">'even\_stream\_taper'</span>);
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf(<span class="string">'even_stream_taper: %.3f s elapsed\n'</span>, toc);
</pre><pre class="codeoutput">even_stream_data: 1.612 s elapsed
even_stream_taper: 0.134 s elapsed
</pre><img vspace="5" hspace="5" src="even_stream_demo_04.png" style="width:560px;height:420px;" alt=""> <h2>Plot textured stream lines<a name="5"></a></h2><p>Plot streamlines with texture effect. This is most effective with closely-spaced streamlines, in which case it mimics the popular line-integral-convilution (LIC) method for visualizing flow fields.</p><pre class="codeinput"><span class="comment">% parameters</span>
dist_sep = 0.003*range(vv);
dist_test = 0.5*dist_sep;

<span class="comment">% compute</span>
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.003, 0.0015);
fprintf(<span class="string">'even_stream_data: %.3f s elapsed\n'</span>, toc);

<span class="comment">% plot</span>
tic
hf = figure;
hf.Name = sprintf(<span class="string">'%s: even stream texture'</span>, mfilename);
even_stream_texture(xy, <span class="string">'LineWidth'</span>, 1, <span class="string">'Period'</span>, 20);
title(<span class="string">'even\_stream\_texture'</span>);
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf(<span class="string">'even_stream_texture: %.3f s elapsed\n'</span>, toc);
</pre><pre class="codeoutput">even_stream_data: 236.974 s elapsed
even_stream_texture: 0.592 s elapsed
</pre><img vspace="5" hspace="5" src="even_stream_demo_05.png" style="width:560px;height:420px;" alt=""> <h2>References<a name="6"></a></h2><div><ol><li>Jobard, B., &amp; Lefer, W. (1997). Creating Evenly-Spaced Streamlines of   Arbitrary Density. In W. Lefer &amp; M. Grave (Eds.), Visualization in   Scientific Computing ?97: Proceedings of the Eurographics Workshop in   Boulogne-sur-Mer France, April 28--30, 1997 (pp. 43?55). inbook,   Vienna: Springer Vienna. <a href="http://doi.org/10.1007/978-3-7091-6876-9_5">http://doi.org/10.1007/978-3-7091-6876-9_5</a></li></ol></div><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2016a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Evenly Spaced Streamlines
% This package plots evenly spaced streamlines for a 2D vector field using
% the algorithm described in Jobar & Lefer, 1997 [1]. Four types of plots
% are included (as in [1]): line, arrow, taper, texture. Streamline
% computation and plotting are split, so that the data can be replotted
% without unnecessarily repeating the computations. In the remainder of
% this document, each type of plot is genereated for an example vector
% field.

%% Example vector field
% The vector field for is the gradient of a simple surface with a single
% local minimum and maximum.

% create vector field
vv = linspace(-2, 2, 20);
hh = vv(2)-vv(1);
[xx, yy] = meshgrid(vv);
zz = xx .* exp(-xx.^2 - yy.^2);
[dzdx, dzdy] = gradient(zz, hh, hh);

% plot surface and vector field
hf = figure;
hf.Name = sprintf('%s: example vector field', mfilename);
imagesc([vv(1), vv(end)], [vv(1), vv(end)], zz);
hold on
quiver(xx, yy, dzdx, dzdy, 'Color', 'k');
title('Example Vector Field');
ax = gca;
ax.XTick = [];
ax.YTick = [];

%% Plot stream lines
% Compute streamlines and plot using a simple line style.

% parameters

% compute
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf('even_stream_data: %.3f s elapsed\n', toc);

% plot
tic
hf = figure;
hf.Name = sprintf('%s: even stream line', mfilename);
even_stream_line(xy, 'LineWidth', 0.5, 'Color', 'k', 'LineStyle', '-');
title('even\_stream\_line');
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf('even_stream_line: %.3f s elapsed\n', toc);

%% Plot stream lines with arrow glyphs 
% Compute streamlines and plot lines with arrow glyphs to indicate flow
% direction. 

% compute
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf('even_stream_data: %.3f s elapsed\n', toc);

% plot
tic
hf = figure;
hf.Name = sprintf('%s: even stream arrow', mfilename);
even_stream_arrow(xy, 'LineStyle', '-', 'LineWidth', 0.5, 'Color', 'k', ...
    'ArrowLength', 5, 'ArrowTipAngle', 30, 'ArrowBaseAngle', 10, ...
    'ArrowSpace', 10);
title('even\_stream\_arrow');
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf('even_stream_arrow: %.3f s elapsed\n', toc);

%% Plot tapered stream lines
% Plot stream lines with tapering effect, such that line width scales with
% the distance to the nearest neighboring streamline.

% compute
tic
[xy, dist] = even_stream_data(xx, yy, dzdx, dzdy, 0.05, 0.025);
fprintf('even_stream_data: %.3f s elapsed\n', toc);

% plot
tic
hf = figure;
hf.Name = sprintf('%s: even stream taper', mfilename);
even_stream_taper(xy, dist, 'LineWidthMin', 0.5, 'LineWidthMax', 2, 'Color', 'k');
title('even\_stream\_taper');
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf('even_stream_taper: %.3f s elapsed\n', toc);

%% Plot textured stream lines
% Plot streamlines with texture effect. This is most effective with
% closely-spaced streamlines, in which case it mimics the popular
% line-integral-convilution (LIC) method for visualizing flow fields.

% parameters
dist_sep = 0.003*range(vv);
dist_test = 0.5*dist_sep;

% compute
tic
xy = even_stream_data(xx, yy, dzdx, dzdy, 0.003, 0.0015);
fprintf('even_stream_data: %.3f s elapsed\n', toc);

% plot
tic
hf = figure;
hf.Name = sprintf('%s: even stream texture', mfilename);
even_stream_texture(xy, 'LineWidth', 1, 'Period', 20);
title('even\_stream\_texture');
ax = gca;
ax.XTick = [];
ax.YTick = [];
fprintf('even_stream_texture: %.3f s elapsed\n', toc);

%% References
% # Jobard, B., & Lefer, W. (1997). Creating Evenly-Spaced Streamlines of
%   Arbitrary Density. In W. Lefer & M. Grave (Eds.), Visualization in
%   Scientific Computing ?97: Proceedings of the Eurographics Workshop in
%   Boulogne-sur-Mer France, April 28REPLACE_WITH_DASH_DASH30, 1997 (pp. 43?55). inbook,
%   Vienna: Springer Vienna. http://doi.org/10.1007/978-3-7091-6876-9_5

##### SOURCE END #####
--></body></html>